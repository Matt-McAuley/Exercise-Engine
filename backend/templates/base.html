<!doctype html>
<title>{% block title %}{% endblock %} - Flaskr</title>
<link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Kanit&family=Montserrat&family=Open+Sans:wght@500&display=swap"
    rel="stylesheet">

<body>
    <div class="full-body-container">
        <div class="top-text">
            <div class="google-colors">
                <h1 id="title">Exercise Engine</h1>
            </div>
            <div class="input-box" onclick="sendFocus()">
                <img id="search-icon" src="{{ url_for('static', filename='images/mag.png') }}" onclick="filterText()" />
                <!-- Dropdown menu -->
                <select id="exercise-dropdown">
                    <option value="" disabled selected>Select an exercise</option>
                    <!-- Populate options dynamically from dataset -->
                    {% for exercise in exercises %}
                    <option value="{{ exercise.Title }}">{{ exercise.Title }}</option>
                    {% endfor %}
                </select>
            </div>
        </div>
        <div id="answer-box"></div>
    </div>

    <script>
        function answerBoxTemplate(title, titleDesc, rating) {
            return `<div class=''>
                <h3 class='episode-title'>${title}</h3>
                <p class='episode-desc'>${titleDesc}</p>
                <p class='episode-rating'>Exercise Rating: ${rating}</p>
            </div>`;
        }

        function sendFocus() {
            document.getElementById('filter-text-val').focus();
        }

        function filterText() {
            document.getElementById("answer-box").innerHTML = "";
            const selectedExercise = document.getElementById("exercise-dropdown").value;
            if (selectedExercise) {
                // Filter exercises based on selected exercise title
                const filteredExercise = exercises.find(exercise => exercise.Title === selectedExercise);
                const { Title, Desc, Rating } = filteredExercise;
                let tempDiv = document.createElement("div");
                tempDiv.innerHTML = answerBoxTemplate(Title, Desc, Rating);
                document.getElementById("answer-box").appendChild(tempDiv);
            }
        }
    </script>
</body>